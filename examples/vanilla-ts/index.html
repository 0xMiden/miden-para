<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <link rel="icon" type="image/svg+xml" href="/vite.svg" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Para SDK Demo</title>
  </head>
  <body>
    <div id="app">
      <header class="bg-white border-b border-gray-200">
        <div class="container mx-auto px-4">
          <div class="flex items-center justify-between h-16">
            <div class="flex items-center space-x-2">
              <span class="font-semibold text-lg">Miden X Para Example</span>
            </div>

            <nav>
              <button
                id="connect-btn"
                class="px-4 py-2 bg-gray-900 text-white rounded-none hover:bg-gray-950 transition-colors text-sm font-medium"
                data-testid="header-connect-button"
              >
                Connect Wallet
              </button>
              <button
                id="disconnect-btn"
                class="px-4 py-2 bg-gray-900 text-white rounded-none hover:bg-gray-950 transition-colors text-sm font-medium hidden"
                data-testid="header-disconnect-button"
              >
                Disconnect
              </button>
            </nav>
          </div>
        </div>
      </header>

      <main class="container mx-auto px-4 py-8">
        <div class="max-w-2xl mx-auto">
          <div class="bg-white border border-gray-200 p-6 mb-4">
            <h2 class="text-xl font-semibold mb-4">Account Status</h2>
            <div class="space-y-2">
              <p>
                <strong>Connected:</strong>
                <span id="status-connected">false</span>
              </p>
              <p>
                <strong>Para Address:</strong>
                <span id="status-address">-</span>
              </p>
            </div>
          </div>

          <!-- Miden Account Section -->
          <div id="miden-section" class="hidden">
            <div class="bg-white border border-gray-200 p-6 mb-4">
              <h2 class="text-xl font-semibold mb-4">Miden Account</h2>
              <div class="space-y-2">
                <p>
                  <strong>Account ID:</strong>
                  <span id="miden-account-id">-</span>
                </p>
                <p>
                  <strong>Miden Address:</strong>
                  <span id="miden-address">-</span>
                </p>
              </div>
            </div>

            <div class="bg-white border border-gray-200 p-6 mb-4">
              <h2 class="text-xl font-semibold mb-4">Balances</h2>
              <div id="balances-list" class="space-y-2">
                <p class="text-gray-500">Loading balances...</p>
              </div>
              <button id="refresh-balance" class="submit-btn mt-4">
                Refresh Balance
              </button>
            </div>

            <div class="bg-white border border-gray-200 p-6 mb-4">
              <h2 class="text-xl font-semibold mb-4">Test Mint & Consume</h2>
              <button id="mint-consume-btn" class="submit-btn">
                Run Mint & Consume Example
              </button>
              <div id="mint-consume-status" class="mt-4 space-y-2 hidden">
                <p><strong>Faucet ID:</strong> <span id="faucet-id">-</span></p>
                <p>
                  <strong>Mint Tx Hash:</strong>
                  <span id="mint-tx-hash">-</span>
                </p>
                <p>
                  <strong>Consume Tx Hash:</strong>
                  <span id="consume-tx-hash">-</span>
                </p>
                <p>
                  <strong>Status:</strong>
                  <span id="mint-consume-status-text">-</span>
                </p>
              </div>
            </div>
          </div>
        </div>
      </main>

      <!-- Auth Modal -->
      <div id="auth-modal" class="modal-overlay hidden">
        <div class="modal-content">
          <div class="modal-header">
            <h2 class="modal-title">Connect Wallet</h2>
            <button id="modal-close" class="close-btn">&times;</button>
          </div>

          <!-- OAuth Wait Step -->
          <div id="step-oauth" class="modal-body">
            <div class="oauth-state">
              <p id="oauth-message">Opening Google authentication window...</p>
              <p class="oauth-url" id="oauth-url"></p>
              <div class="loading-state">
                <div class="spinner"></div>
              </div>
            </div>
          </div>

          <!-- Error Display -->
          <div id="modal-error" class="error-message hidden"></div>

          <!-- Loading Overlay -->
          <div id="modal-loading" class="loading-overlay hidden">
            <div class="spinner"></div>
          </div>
        </div>
      </div>
    </div>
    <script type="module" src="/src/main.ts"></script>
  </body>
</html>
